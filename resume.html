<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>Rivoc的个人简历</title>
  <link rel="stylesheet" href="./resume.css" />
  <script src="./font/iconfont.js"></script>
  <style type="text/css">
    .icon {
      width: 1em;
      height: 1em;
      vertical-align: -0.15em;
      fill: currentColor;
      overflow: hidden;
    }
  </style>
</head>

<body>
  <div id="siteLoading" class="loading loading-start"></div>
  <div class="topNavBar" id="topNavbar">
    <div class="inner-topNavBar clearFix" id="inner-topNavBar">
      <a href="#" class="logo" alt="logo">
        <span class="rs">RS</span><span class="card">card</span>
      </a>
      <nav>
        <ul class="clearFix">
          <li class="highlight"><a href="#about">关于</a></li>
          <li><a href="#skill">技能</a></li>
          <li>
            <a href="#work">作品</a>
            <ul class="subMenu">
              <li><a href="">作品1</a></li>
              <li><a href="">作品2</a></li>
              <li><a href="">作品3</a></li>
            </ul>
          </li>
          <li>
            <a href="#blog">博客</a>
            <ul class="subMenu">
              <li><a href="">博客1</a></li>
              <li><a href="">博客2</a></li>
              <li><a href="">博客3</a></li>
            </ul>
          </li>
          <li><a href="#">日历</a></li>
          <li><a href="#">联系方式</a></li>
          <li><a href="#">其他</a></li>
        </ul>
      </nav>
    </div>
  </div>
  <div class="banner">
    <div class="mask"></div>
  </div>
  <main>
    <div class="user-card" id="about" data-x>
      <div class="pic-and-text clearFix">
        <div class="pic">
          <img src="./img/avatar.jpg" alt="" />
        </div>
        <div class="text">
          <span class="welcome">Hello</span>
          <h1>崔铃</h1>
          <p>前端开发工程师</p>
          <hr />
          <dl>
            <dt>年龄</dt>
            <dd>21</dd>
            <dt>所在城市</dt>
            <dd>长沙</dd>
            <dt>邮箱</dt>
            <dd>xxx@qq.com</dd>
            <dt>手机</dt>
            <dd>177xxxxxxxx</dd>
          </dl>
        </div>
      </div>
      <footer class="media">
        <a href="#">
          <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-tuite"></use>
          </svg>
        </a>
        <a href="#">
          <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-github"></use>
          </svg>
        </a>
        <a href="#">
          <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-weibo"></use>
          </svg>
        </a>
      </footer>
    </div>
    <p class="downloadResume-wrapper">
      <a class="downloadResume" href="./resume.pdf" target="_blank" download>下载 PDF 简历</a>
    </p>
    <p class="self-intro">
      20届xxxx大学应届毕业生<br />
      技能：html5&css3,Javascript,Vue.js,React.js,Node.js...
    </p>
  </main>
  <section class="skills" id="skill" data-x>
    <h2>技能</h2>
    <ol class="clearFix">
      <li>
        <h3>HTML 5 & CSS 3</h3>
        <div class="progress-bar">
          <div class="progress"></div>
        </div>
      </li>
      <li>
        <h3>JavaScript</h3>
        <div class="progress-bar">
          <div class="progress" style="width:80%"></div>
        </div>
      </li>
      <li>
        <h3>jQuery</h3>
        <div class="progress-bar">
          <div class="progress" style="width:40%"></div>
        </div>
      </li>
      <li>
        <h3>Vue.js</h3>
        <div class="progress-bar">
          <div class="progress" style="width:60%"></div>
        </div>
      </li>
      <li>
        <h3>React.js</h3>
        <div class="progress-bar">
          <div class="progress" style="width:40%"></div>
        </div>
      </li>
      <li>
        <h3>Node.js</h3>
        <div class="progress-bar">
          <div class="progress" style="width:30%"></div>
        </div>
      </li>
    </ol>
  </section>
  <section class="portfolio" id="work" data-x>
    <h2>作品集</h2>
    <nav>
      <ol class="clearFix">
        <li id="portfolio1">所有</li>
        <li id="portfolio2">框架</li>
        <li id="portfolio3">原生JS&amp;CSS</li>
      </ol>
      <div class="portfolioBar">
        <div id="bar-inner" class="state-1"></div>
      </div>
    </nav>
    <div class="works" style="height: 597px;">
      <div class="big" style="top: 0; left: 0;">
        <img src="./img/1.jpg" alt="作品1" />
      </div>
      <div class="small" style="top: 0; left: 645px;">
        <img src="./img/2.jpg" alt="作品2" />
      </div>
      <div class="small" style="top: 312px; left: 645px;">
        <img src="./img/3.jpg" alt="作品3" />
      </div>
    </div>
  </section>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.4.0/Tween.min.js"></script>
<script>
  var portfolio1 = document.getElementById("portfolio1");
  var portfolio2 = document.getElementById("portfolio2");
  var portfolio3 = document.getElementById("portfolio3");
  var barInner = document.getElementById("bar-inner");
  var topNavBar = document.getElementById("topNavbar");
  var innerTopNavBar = document.getElementById("inner-topNavBar");
  var menus = document.querySelectorAll(".topNavBar nav li");
  var subMenus = document.querySelectorAll(".subMenu");
  var aTags = document.querySelectorAll(".topNavBar nav .clearFix>li>a");
  var specialTags = document.querySelectorAll('[data-x]')
  var siteLoading = document.getElementById("siteLoading");
  window.onload = function () {
    //给每个标记部分添加offset类
    for (let i = 0; i < specialTags.length; i++) {
      specialTags[i].classList.add('offset')
    }
    setTimeout(() => window.scrollTo(0,0), 500)//回到顶部要先于加载fixedNav()函数，否则会提前触发动画
    setTimeout(() =>
      siteLoading.classList.remove("loading-start")
    , 1000);
    setTimeout(
      findClosest,1100);
    fixedNav()
    nav()
  };
  window.onscroll = function () {
    fixedNav()
    findClosest()
  };
  portfolio1.onclick = function () {
    barInner.className = "state-1";
  };
  portfolio2.onclick = function () {
    barInner.className = "state-2";
  };
  portfolio3.onclick = function () {
    barInner.className = "state-3";
  };
  function fixedNav() {
    if (window.scrollY > 0) {
      topNavBar.classList.add("sticky");
      innerTopNavBar.style = "padding:13px 16px";
      subMenus.forEach(function (subMenu) {
        subMenu.classList.add("sticky");
      });
    } else {
      topNavBar.classList.remove("sticky");
      innerTopNavBar.style = "padding:20px 16px";
      subMenus.forEach(function (subMenu) {
        subMenu.classList.remove("sticky");
      });
    }
  }
 
  //获取最近的部分,添加向上缓动动画，并高亮对应导航
  function findClosest() {
    //找最近
    var minIndex = 0;
    for (let i = 1; i < specialTags.length; i++) {
      if (
        Math.abs(specialTags[i].offsetTop - window.scrollY)<
        Math.abs(specialTags[minIndex].offsetTop - window.scrollY-500)
      ) {
        minIndex = i;
      }
    }
    specialTags[minIndex].classList.remove("offset");
    let id = specialTags[minIndex].id;
    let a = document.querySelector('a[href="#' + id + '"]');
    let li = a.parentNode;
    let lis = li.parentNode.children;
    for (let i = 0; i < lis.length; i++) {
      lis[i].classList.remove("highlight");
    }
    li.classList.add("highlight");
  }
//导航菜单特效：1.鼠标移入一级菜单，一级菜单底部出现从左到右的线条并出现二级菜单 2.点击导航滚动到页面对应部分（缓动动画）
function nav(){
  menus.forEach(function (menu) {
    menu.onmouseenter = function () {
      this.classList.add("menu-active");
    };
    menu.onmouseleave = function () {
      this.classList.remove("menu-active");
    };
  });
  requestAnimationFrame(animate);

  function animate(time) {
    requestAnimationFrame(animate);
    TWEEN.update(time);
  }
  aTags.forEach(function (aTag) {
    aTag.onclick = function (e) {
      e.preventDefault();
      var targetEle = document.querySelector(this.getAttribute("href"));
      var targetTop = targetEle.offsetTop - 80;
      var currentTop = window.scrollY;
      var distance = targetTop - currentTop;
      var t = Math.abs((150 * distance) / 100); //自定义时间，根据要滚动的距离不同，时间也应不同，距离越短时间越少距离越大时间越长，此处设置0.15S走100像素(t是一个变量)
      if (t >= 1200) {
        //防止滚动时间过长，设置滚动最长时间为1.2s
        t = 1200;
      }
      var coords = { y: currentTop };
      var tween = new TWEEN.Tween(coords)
        .to({ y: targetTop }, t)
        .easing(TWEEN.Easing.Quadratic.InOut)
        .onUpdate(function () {
          window.scrollTo(0, coords.y);
        })
        .start();
    };
  });
}
  
</script>

</html>